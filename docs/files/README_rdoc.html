<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>File: README.rdoc [Sunspot 0.10.6 - Solr-powered search for Ruby objects - API Documentation]</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='file' id='wrapper'>
      <div class='header'>
        <div class='name'>README.rdoc</div>
        <div class='paths'>
          README.rdoc
          (<a href="http://github.com/outoftime/sunspot/tree/v0.10.6/README.rdoc">view online</a>)
        </div>
        <div class='last-update'>
          Last Update:
          <span class='datetime'>Thu Nov 05 18:25:49 -0500 2009</span>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            <h1><a href="../classes/Sunspot.html">Sunspot</a></h1>
            <p>
            <a
            href="http://outoftime.github.com/sunspot">outoftime.github.com/sunspot</a>
            </p>
            <p>
            <a href="../classes/Sunspot.html">Sunspot</a> is a Ruby library for
            expressive, powerful interaction with the Solr search engine. <a
            href="../classes/Sunspot.html">Sunspot</a> is built on top of the RSolr
            gem, which provides a low-level interface for Solr interaction; <a
            href="../classes/Sunspot.html">Sunspot</a> provides a simple, intuitive,
            expressive DSL backed by powerful features for indexing objects and
            searching for them.
            </p>
            <p>
            <a href="../classes/Sunspot.html">Sunspot</a> is designed to be easily
            plugged in to any ORM, or even non-database-backed objects such as the
            filesystem.
            </p>
            <p>
            This README is intended as a quick primer on what <a
            href="../classes/Sunspot.html">Sunspot</a> is capable of; for detailed
            treatment of Sunspot&#8217;s full feature range, check out the wiki: <a
            href="http://wiki.github.com/outoftime/sunspot">wiki.github.com/outoftime/sunspot</a>
            </p>
            <h3>Features:</h3>
            <ul>
            <li>Define indexing strategy for each searchable class using intuitive
            block-based API
            
            </li>
            <li>Clean separation between keyword-searchable fields and fields for
            scoping/ordering
            
            </li>
            <li>Define fields based on existing attributes or &#8220;virtual fields&#8221;
            for custom indexing
            
            </li>
            <li>Indexes each object&#8217;s entire superclass hierarchy, for easy searching
            for all objects inheriting from a parent class
            
            </li>
            <li>Intuitive DSL for scoping searches, with all the usual boolean operators
            available
            
            </li>
            <li>Intuitive interface for requesting facets on indexed fields
            
            </li>
            <li>Extensible adapter architecture for easy integration of other ORMs or
            non-model classes
            
            </li>
            <li>Refine search using field facets, date range facets, or ultra-powerful
            query facets
            
            </li>
            <li>Full compatibility with will_paginate
            
            </li>
            <li>Ordering
            
            </li>
            </ul>
            <h2>Installation</h2>
            <pre>gem install sunspot</pre>
            <p>
            In order to start the packaged Solr installation, run:
            </p>
            <pre>sunspot-solr start -- [-d /path/to/data/directory] [-p port] [-s path/to/solr/home] [--pid-dir=path/to/pid/dir]</pre>
            <p>
            If you don&#8217;t specify a data directory, your Solr index will be stored
            in your operating system&#8217;s temporary directory.
            </p>
            <p>
            If you specify a solr home, the directory must contain a <tt>conf</tt>
            directory, which should contain at least <tt>schema.xml</tt> and
            <tt>solrconfig.xml</tt>. Be sure to copy the <tt>schema.xml</tt> out of the
            <a href="../classes/Sunspot.html">Sunspot</a> gem&#8217;s
            <tt>solr/solr/conf</tt> directory. <a
            href="../classes/Sunspot.html">Sunspot</a> relies on the field name
            patterns defined in the packaged <tt>schema.xml</tt>, so those cannot be
            modified.
            </p>
            <p>
            You can also run your own instance of Solr wherever you&#8217;d like; just
            copy the solr/config/schema.xml file out of the gem&#8217;s solr into your
            installation. You can change the URL at which <a
            href="../classes/Sunspot.html">Sunspot</a> accesses Solr with:
            </p>
            <pre>Sunspot.config.solr.url = 'http://solr.my.host:9818/solr'</pre>
            <h2>Rails Integration</h2>
            <p>
            The <a href="http://github.com/outoftime/sunspot_rails">Sunspot::Rails</a>
            plugin makes integrating <a href="../classes/Sunspot.html">Sunspot</a> into
            Rails drop-in easy.
            </p>
            <h2>Using <a href="../classes/Sunspot.html">Sunspot</a></h2>
            <h3>Define an index:</h3>
            <pre>class Post&#x000A;  #...&#x000A;end&#x000A;&#x000A;Sunspot.setup(Post) do&#x000A;  text :title, :body&#x000A;  string :author_name&#x000A;  integer :blog_id&#x000A;  integer :category_ids&#x000A;  float :average_rating, :using =&gt; :ratings_average&#x000A;  time :published_at&#x000A;  string :sort_title do&#x000A;    title.downcase.sub(/^(an?|the)\W+/, ''/) if title = self.title&#x000A;  end&#x000A;end</pre>
            <p>
            See <a href="../classes/Sunspot.html#M000001">Sunspot.setup</a> for more
            information.
            </p>
            <p>
            Note that in order for a class to be searchable, it must have an adapter
            registered for itself or one of its subclasses. Adapters allow <a
            href="../classes/Sunspot.html">Sunspot</a> to load objects out of
            persistent storage, and to determine their primary key for indexing. <a
            href="http://github.com/outoftime/sunspot_rails">Sunspot::Rails</a> comes
            with an adapter for ActiveRecord objects, but for other types of models you
            will need to define your own. See <a
            href="../classes/Sunspot/Adapters.html">Sunspot::Adapters</a> for more
            information.
            </p>
            <h3>Search for objects:</h3>
            <pre>search = Sunspot.search Post do&#x000A;  keywords 'great pizza'&#x000A;  with :author_name, 'Mark Twain'&#x000A;  with(:blog_id).any_of [2, 14]&#x000A;  with(:category_ids).all_of [4, 10]&#x000A;  with(:published_at).less_than Time.now&#x000A;  any_of do&#x000A;    with(:expired_at).greater_than(Time.now)&#x000A;    with(:expired_at, nil)&#x000A;  end&#x000A;  without :title, 'Bad Title'&#x000A;  without bad_instance # specifically exclude this instance from results&#x000A;&#x000A;  paginate :page =&gt; 3, :per_page =&gt; 15&#x000A;  order_by :average_rating, :desc&#x000A;&#x000A;  facet :blog_id&#x000A;end</pre>
            <p>
            See <a href="../classes/Sunspot.html#M000006">Sunspot.search</a> for more
            information.
            </p>
            <h3>Get data from search:</h3>
            <pre>search.results&#x000A;search.total&#x000A;search.page&#x000A;search.per_page&#x000A;search.facet(:blog_id)</pre>
            <h2>About the API documentation</h2>
            <p>
            All of the methods documented in the RDoc are considered part of
            Sunspot&#8217;s public API. Methods that are not part of the public API are
            documented in the code, but excluded from the RDoc. If you find yourself
            needing to access methods that are not part of the public API in order to
            do what you need, please contact me so I can rectify the situation!
            </p>
            <h2>Dependencies</h2>
            <ol>
            <li>RSolr 0.9.6
            
            </li>
            <li>Daemons 1.x
            
            </li>
            <li>Java 1.5+
            
            </li>
            </ol>
            <p>
            <a href="../classes/Sunspot.html">Sunspot</a> has been tested with MRI
            1.8.6 and 1.8.7, REE 1.8.6, YARV 1.9.1, and JRuby 1.2.0
            </p>
            <h2>Bugs</h2>
            <p>
            Please submit bug reports to <a
            href="http://outoftime.lighthouseapp.com/projects/20339-sunspot">outoftime.lighthouseapp.com/projects/20339-sunspot</a>
            </p>
            <h2>Contribution Guidelines</h2>
            <p>
            Contributions are very welcome - both new features, enhancements, and bug
            fixes. Bug reports with a failing regression test are also lovely. In order
            to keep the contribution process as organized and smooth as possible,
            please follow these guidelines:
            </p>
            <ul>
            <li>Contributions should be submitted via Sunspot&#8217;s Lighthouse account,
            with an attached git patch. See below for how to create a git patch.
            
            </li>
            <li>Patches should not make any changes in your patch to the gemspec task other
            than adding/removing dependencies (e.g., changing the name, version, email,
            description, etc.)
            
            </li>
            <li>Patches should not include any changes to the gemspec itself.
            
            </li>
            <li>Document any new methods, options, arguments, etc.
            
            </li>
            <li>Write tests.
            
            </li>
            <li>As much as possible, follow the coding and testing styles you see in
            existing code. One could accuse me of being nitpicky about this, but
            consistent code is easier to read, maintain, and enhance.
            
            </li>
            <li>Don&#8217;t make any massive changes to the structure of library or test
            code. If you think something needs a huge refactor or rearrangement, shoot
            me a message; trying to apply that kind of patch without warning opens the
            door to a world of conflict hurt.
            
            </li>
            </ul>
            <p>
            Here&#8217;s how to create a Git patch - assuming you&#8217;re pulling from
            the canonical <a href="../classes/Sunspot.html">Sunspot</a> repository at
            `upstream`:
            </p>
            <pre>git fetch upstream&#x000A;git format-patch upstre</pre>
            <h2>Further Reading</h2>
            <ul>
            <li><a href="../classes/Sunspot.html">Sunspot</a> Discussion: <a
            href="http://groups.google.com/group/ruby-sunspot">groups.google.com/group/ruby-sunspot</a>
            
            </li>
            <li>IRC: sunspot-ruby @ Freenode
            
            </li>
            <li>Posts about <a href="../classes/Sunspot.html">Sunspot</a> from my tumblog:
            <a href="http://outofti.me/tagged/sunspot">outofti.me/tagged/sunspot</a>
            
            </li>
            <li>Read about it on Linux Magazine: <a
            href="http://www.linux-mag.com/id/7341">www.linux-mag.com/id/7341</a>
            
            </li>
            </ul>
            <h2>Contributors</h2>
            <ul>
            <li>Mat Brown (mat@patch.com)
            
            </li>
            <li>Peer Allan (peer.allan@gmail.com)
            
            </li>
            <li>Dmitriy Dzema (dima@dzema.name)
            
            </li>
            <li>Benjamin Krause (bk@benjaminkrause.com)
            
            </li>
            <li>Marcel de Graaf (marcel@slashdev.nl)
            
            </li>
            <li>Brandon Keepers (brandon@opensoul.org)
            
            </li>
            <li>Peter Berkenbosch (peterberkenbosch@me.com)
            
            </li>
            <li>Brian Atkinson
            
            </li>
            <li>Tom Coleman (tom@thesnail.org)
            
            </li>
            </ul>
            <h2>License</h2>
            <p>
            <a href="../classes/Sunspot.html">Sunspot</a> is distributed under the MIT
            License, copyright &#169; 2008-2009 Mat Brown
            </p>
          </div>
          <div id='section'>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>

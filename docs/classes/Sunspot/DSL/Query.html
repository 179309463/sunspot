<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>: Sunspot::DSL::Query [Sunspot - Pure-Ruby Solr Search and Indexing - API Documentation]</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='../../../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>Class</span>
          Sunspot::DSL::Query
        </h1>
        <ol class='paths'>
          <li>
            <a href="../../../files/lib/sunspot/dsl/query_rb.html">lib/sunspot/dsl/query.rb</a>
            (<a href="http://github.com/outoftime/sunspot/tree/v0.8.1/lib/sunspot/dsl/query.rb">view online</a>)
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong><a href="Scope.html">Sunspot::DSL::Scope</a></strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            <p>
            This class presents a DSL for constructing queries using the <a
            href="../../Sunspot.html#M000006">Sunspot.search</a> method. Methods of
            this class are available inside the search block. Methods that take field
            names as arguments are implemented in the superclass <a
            href="Scope.html">Sunspot::DSL::Scope</a>, as that DSL is also available in
            the dynamic() block.
            </p>
            <p>
            See <a href="../../Sunspot.html#M000006">Sunspot.search</a> for usage
            examples
            </p>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>public instance</h3>
            <ol>
              <li><a href="#M000020">dynamic</a></li>
              <li><a href="#M000018">keywords</a></li>
              <li><a href="#M000019">paginate</a></li>
            </ol>
          </div>
          <div id='section'>
            <div id='methods'>
              <h2>Public instance methods</h2>
              <div class='public-instance method' id='method-M000020'>
                <a name='M000020'>      </a>
                <div class='synopsis'>
                  <span class='name'>dynamic</span>
                  <span class='arguments'>(base_name, &amp;block)</span>
                </div>
                <div class='description'>
                  <p>
                  Apply restrictions, facets, and ordering to dynamic field instances. The
                  block API is implemented by <a href="Scope.html">Sunspot::DSL::Scope</a>,
                  which is a superclass of the <a href="Query.html">Query</a> DSL (thus
                  providing a subset of the API, in particular only methods that refer to
                  particular fields).
                  </p>
                  <h4>Parameters</h4>
                  <table>
                  <tr><td valign="top">base_name<Symbol>:</td><td>The base name for the dynamic field definition
                  
                  </td></tr>
                  </table>
                  <h4>Example</h4>
                  <pre>Sunspot.search Post do&#x000A;  dynamic :custom do&#x000A;    with :cuisine, 'Pizza'&#x000A;    facet :atmosphere&#x000A;    order_by :chef_name&#x000A;  end&#x000A;end</pre>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000020-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000020-source'><span class="ruby-comment cmt"># File lib/sunspot/dsl/query.rb, line 73</span>&#x000A;      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">dynamic</span>(<span class="ruby-identifier">base_name</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;        <span class="ruby-constant">Scope</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@query</span>.<span class="ruby-identifier">dynamic_query</span>(<span class="ruby-identifier">base_name</span>)).<span class="ruby-identifier">instance_eval</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;      <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000018'>
                <a name='M000018'>      </a>
                <div class='synopsis'>
                  <span class='name'>keywords</span>
                  <span class='arguments'>(keywords)</span>
                </div>
                <div class='description'>
                  <p>
                  Specify a phrase that should be searched as fulltext. Only <tt>text</tt>
                  fields are searched - see <a
                  href="Fields.html#M000021">DSL::Fields.text</a>
                  </p>
                  <p>
                  Note that the keywords are passed directly to Solr unadulterated. The
                  advantage of this is that users can potentially use boolean logic to make
                  advanced searches. The disadvantage is that syntax errors are possible.
                  This may get better in a future version; suggestions are welcome.
                  </p>
                  <h4>Parameters</h4>
                  <table>
                  <tr><td valign="top">keywords<String>:</td><td>phrase to perform fulltext search on
                  
                  </td></tr>
                  </table>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000018-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000018-source'><span class="ruby-comment cmt"># File lib/sunspot/dsl/query.rb, line 26</span>&#x000A;      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">keywords</span>(<span class="ruby-identifier">keywords</span>)&#x000A;        <span class="ruby-ivar">@query</span>.<span class="ruby-identifier">keywords</span> = <span class="ruby-identifier">keywords</span>&#x000A;      <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='public-instance method' id='method-M000019'>
                <a name='M000019'>      </a>
                <div class='synopsis'>
                  <span class='name'>paginate</span>
                  <span class='arguments'>(options = {})</span>
                </div>
                <div class='description'>
                  <p>
                  Paginate your search. This works the same way as WillPaginate&#8217;s
                  paginate().
                  </p>
                  <p>
                  Note that Solr searches are <em>always</em> paginated. Not calling <a
                  href="Query.html#M000019">paginate</a> is the equivalent of calling:
                  </p>
                  <pre>paginate(:page =&gt; 1, :per_page =&gt; Sunspot.config.pagination.default_per_page)</pre>
                  <h4>Options (options)</h4>
                  <table>
                  <tr><td valign="top">:page<Integer>:</td><td>The requested page (required)
                  
                  </td></tr>
                  <tr><td valign="top">:per_page<Integer>:</td><td>How many results to return per page. The default is the value in <tt><a
                  href="../../Sunspot.html#M000013">Sunspot.config</a>.pagination.default_per_page</tt>
                  
                  </td></tr>
                  </table>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000019-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000019-source'><span class="ruby-comment cmt"># File lib/sunspot/dsl/query.rb, line 46</span>&#x000A;      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">options</span> = {})&#x000A;        <span class="ruby-identifier">page</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:page</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">raise</span>(<span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;paginate requires a :page argument&quot;</span>)&#x000A;        <span class="ruby-identifier">per_page</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:per_page</span>)&#x000A;        <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;unknown argument #{options.keys.first.inspect} passed to paginate&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">empty?</span>&#x000A;        <span class="ruby-ivar">@query</span>.<span class="ruby-identifier">paginate</span>(<span class="ruby-identifier">page</span>, <span class="ruby-identifier">per_page</span>)&#x000A;      <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>

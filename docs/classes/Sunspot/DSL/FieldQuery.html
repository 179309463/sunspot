<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>: Sunspot::DSL::FieldQuery [Sunspot 1.2.rc3 - Solr-powered search for Ruby objects - API Documentation]</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='../../../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>Class</span>
          Sunspot::DSL::FieldQuery
        </h1>
        <ol class='paths'>
          <li>
            <a href="../../../files/lib/sunspot/dsl/field_query_rb.html">lib/sunspot/dsl/field_query.rb</a>
            (<a href="http://github.com/outoftime/sunspot/tree/v1.2.rc3/lib/sunspot/dsl/field_query.rb">view online</a>)
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong><a href="Scope.html">Sunspot::DSL::Scope</a></strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            <p>
            Provides an API for areas of the query DSL that operate on specific fields.
            This functionality is provided by the query DSL and the dynamic query DSL.
            </p>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>public instance</h3>
            <ol>
              <li><a href="#M000107">dynamic</a></li>
              <li><a href="#M000106">facet</a></li>
              <li><a href="#M000104">order_by</a></li>
              <li><a href="#M000105">order_by_random</a></li>
            </ol>
          </div>
          <div id='section'>
            <div id='methods'>
              <h2>Public instance methods</h2>
              <div class='method public-instance' id='method-M000107'>
                <a name='M000107'></a>
                <div class='synopsis'>
                  <span class='name'>dynamic</span>
                  <span class='arguments'>(base_name, &amp;block)</span>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000107-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000107-source'><span class="ruby-comment cmt"># File lib/sunspot/dsl/field_query.rb, line 257</span>&#x000A;      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">dynamic</span>(<span class="ruby-identifier">base_name</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;        <span class="ruby-identifier">dynamic_field_factory</span> = <span class="ruby-ivar">@setup</span>.<span class="ruby-identifier">dynamic_field_factory</span>(<span class="ruby-identifier">base_name</span>)&#x000A;        <span class="ruby-constant">Sunspot</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">instance_eval_or_call</span>(&#x000A;          <span class="ruby-constant">FieldQuery</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@search</span>, <span class="ruby-ivar">@query</span>, <span class="ruby-identifier">dynamic_field_factory</span>),&#x000A;          <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>&#x000A;        )&#x000A;      <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000106'>
                <a name='M000106'></a>
                <div class='synopsis'>
                  <span class='name'>facet</span>
                  <span class='arguments'>(*field_names, &amp;block)</span>
                </div>
                <div class='description'>
                  <p>
                  Request a facet on the search query. A facet is a feature of Solr that
                  determines the number of documents that match the existing search
                  <b>and</b> an additional criterion. This allows you to build powerful
                  drill-down interfaces for search, at each step presenting the searcher with
                  a set of refinements that are known to return results.
                  </p>
                  <p>
                  In <a href="../../Sunspot.html">Sunspot</a>, each facet returns zero or
                  more rows, each of which represents a particular criterion conjoined with
                  the actual query being performed. For <em>field</em> <em>facets</em>, each
                  row represents a particular value for a given field. For <em>query</em>
                  <em>facets</em>, each row represents an arbitrary scope; the facet itself
                  is just a means of logically grouping the scopes.
                  </p>
                  <h3>Examples</h3>
                  <h4>Field Facets</h4>
                  <p>
                  A field facet is specified by passing one or more Symbol arguments to this
                  method:
                  </p>
                  <pre>Sunspot.search(Post) do&#x000A;  with(:blog_id, 1)&#x000A;  facet(:category_id)&#x000A;end</pre>
                  <p>
                  The facet specified above will have a row for each category_id that is
                  present in a document which also has a blog_id of 1.
                  </p>
                  <h4>Multiselect Facets</h4>
                  <p>
                  In certain circumstances, it is beneficial to exclude certain query scopes
                  from a facet; the most common example is multi-select faceting, where the
                  user has selected a certain value, but the facet should still show all
                  options that would be available if they had not:
                  </p>
                  <pre>Sunspot.search(Post) do&#x000A;  with(:blog_id, 1)&#x000A;  category_filter = with(:category_id, 2)&#x000A;  facet(:category_id, :exclude =&gt; category_filter)&#x000A;end</pre>
                  <p>
                  Although the results of the above search will be restricted to those with a
                  category_id of 2, the category_id facet will operate as if a category had
                  not been selected, allowing the user to select additional categories (which
                  will presumably be ORed together).
                  </p>
                  <p>
                  <strong>As far as I can tell, Solr only supports multi-select with field
                  facets; if <tt>:exclude</tt> is passed to a query facet, this method will
                  raise an error. Also, the <tt>:only</tt> and <tt>:extra</tt> options use
                  query faceting under the hood, so these can&#8217;t be used with
                  <tt>:extra</tt> either. </strong>
                  </p>
                  <h4>Query Facets</h4>
                  <p>
                  A query facet is a collection of arbitrary scopes, each of which represents
                  a row. This is specified by passing a block into the <a
                  href="FieldQuery.html#M000106">facet</a> method; the block then contains
                  one or more <tt>row</tt> blocks, each of which creates a query facet row.
                  The <tt>row</tt> blocks follow the usual <a
                  href="../../Sunspot.html">Sunspot</a> scope DSL.
                  </p>
                  <p>
                  For example, a query facet can be used to facet over a set of ranges:
                  </p>
                  <pre>Sunspot.search(Post) do&#x000A;  facet(:average_rating) do&#x000A;    row(1.0..2.0) do&#x000A;      with(:average_rating, 1.0..2.0)&#x000A;    end&#x000A;    row(2.0..3.0) do&#x000A;      with(:average_rating, 2.0..3.0)&#x000A;    end&#x000A;    row(3.0..4.0) do&#x000A;      with(:average_rating, 3.0..4.0)&#x000A;    end&#x000A;    row(4.0..5.0) do&#x000A;      with(:average_rating, 4.0..5.0)&#x000A;    end&#x000A;  end&#x000A;end</pre>
                  <p>
                  Note that the arguments to the <tt>facet</tt> and <tt>row</tt> methods
                  simply provide labels for the facet and its rows, so that they can be
                  retrieved and identified from the <a href="Search.html">Search</a> object.
                  They are not passed to Solr and no semantic meaning is attached to them.
                  The label for <tt>facet</tt> should be a symbol; the label for <tt>row</tt>
                  can be whatever you&#8217;d like.
                  </p>
                  <h4>Parameters</h4>
                  <table>
                  <tr><td valign="top">field_names...<Symbol>:</td><td>fields for which to return field facets
                  
                  </td></tr>
                  </table>
                  <h4>Options</h4>
                  <table>
                  <tr><td valign="top">:sort<Symbol>:</td><td>Either :count (values matching the most terms first) or :index (lexical)
                  
                  </td></tr>
                  <tr><td valign="top">:limit<Integer>:</td><td>The maximum number of facet rows to return
                  
                  </td></tr>
                  <tr><td valign="top">:minimum_count<Integer>:</td><td>The minimum count a facet row must have to be returned
                  
                  </td></tr>
                  <tr><td valign="top">:zeros<Boolean>:</td><td>Return facet rows for which there are no matches (equivalent to
                  :minimum_count => 0). Default is false.
                  
                  </td></tr>
                  <tr><td valign="top">:exclude<Object,Array>:</td><td>Exclude one or more filters when performing the faceting (see Multiselect
                  Faceting above). The object given for this argument should be the return
                  value(s) of a scoping method (<tt>with</tt>, <tt>any_of</tt>,
                  <tt>all_of</tt>, etc.). <strong>Only can be used for field facets that do
                  not use the <tt>:extra</tt> or <tt>:only</tt> options.</strong>
                  
                  </td></tr>
                  <tr><td valign="top">:name<Symbol>:</td><td>Give a custom name to a field facet. The main use case for this option is
                  for requesting the same field facet multiple times, using different filter
                  exclusions (see Multiselect Faceting above). If you pass this option, it is
                  also the argument that should be passed to Search#facet when retrieving the
                  facet result.
                  
                  </td></tr>
                  <tr><td valign="top">:only<Array>:</td><td>Only return facet rows for the given values. Useful if you are only
                  interested in faceting on a subset of values for a given field.
                  <strong>Only applies to field facets.</strong>
                  
                  </td></tr>
                  <tr><td valign="top">:extra<Symbol,Array>:</td><td>One or more of :any and :none. :any returns a facet row with a count of all
                  matching documents that have some value for this field. :none returns a
                  facet row with a count of all matching documents that have no value for
                  this field. The facet row(s) corresponding to the extras have a value of
                  the symbol passed. <strong>Only applies to field facets.</strong>
                  
                  </td></tr>
                  </table>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000106-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000106-source'><span class="ruby-comment cmt"># File lib/sunspot/dsl/field_query.rb, line 166</span>&#x000A;      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">facet</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">field_names</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;        <span class="ruby-identifier">options</span> = <span class="ruby-constant">Sunspot</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">extract_options_from</span>(<span class="ruby-identifier">field_names</span>)&#x000A;&#x000A;        <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block</span>&#x000A;          <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">field_names</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">!=</span> <span class="ruby-value">1</span>&#x000A;            <span class="ruby-identifier">raise</span>(&#x000A;              <span class="ruby-constant">ArgumentError</span>,&#x000A;              <span class="ruby-node">&quot;wrong number of arguments (#{field_names.length} for 1)&quot;</span>&#x000A;            )&#x000A;          <span class="ruby-keyword kw">end</span>&#x000A;          <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:exclude</span>)&#x000A;            <span class="ruby-identifier">raise</span>(&#x000A;              <span class="ruby-constant">ArgumentError</span>,&#x000A;              <span class="ruby-value str">&quot;can't use :exclude with query facets&quot;</span>&#x000A;            )&#x000A;          <span class="ruby-keyword kw">end</span>&#x000A;          <span class="ruby-identifier">search_facet</span> = <span class="ruby-ivar">@search</span>.<span class="ruby-identifier">add_query_facet</span>(<span class="ruby-identifier">field_names</span>.<span class="ruby-identifier">first</span>, <span class="ruby-identifier">options</span>)&#x000A;          <span class="ruby-constant">Sunspot</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">instance_eval_or_call</span>(&#x000A;            <span class="ruby-constant">QueryFacet</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@query</span>, <span class="ruby-ivar">@setup</span>, <span class="ruby-identifier">search_facet</span>),&#x000A;            <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>&#x000A;          )&#x000A;        <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:only</span>]&#x000A;          <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:exclude</span>)&#x000A;            <span class="ruby-identifier">raise</span>(&#x000A;              <span class="ruby-constant">ArgumentError</span>,&#x000A;              <span class="ruby-value str">&quot;can't use :exclude with :only (see documentation)&quot;</span>&#x000A;            )&#x000A;          <span class="ruby-keyword kw">end</span>&#x000A;          <span class="ruby-identifier">field_names</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">field_name</span><span class="ruby-operator">|</span>&#x000A;            <span class="ruby-identifier">field</span> = <span class="ruby-ivar">@setup</span>.<span class="ruby-identifier">field</span>(<span class="ruby-identifier">field_name</span>)&#x000A;            <span class="ruby-identifier">search_facet</span> = <span class="ruby-ivar">@search</span>.<span class="ruby-identifier">add_field_facet</span>(<span class="ruby-identifier">field</span>, <span class="ruby-identifier">options</span>)&#x000A;            <span class="ruby-constant">Util</span>.<span class="ruby-constant">Array</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:only</span>]).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>&#x000A;              <span class="ruby-identifier">facet</span> = <span class="ruby-constant">Sunspot</span><span class="ruby-operator">::</span><span class="ruby-constant">Query</span><span class="ruby-operator">::</span><span class="ruby-constant">QueryFacet</span>.<span class="ruby-identifier">new</span>&#x000A;              <span class="ruby-identifier">facet</span>.<span class="ruby-identifier">add_positive_restriction</span>(<span class="ruby-identifier">field</span>, <span class="ruby-constant">Sunspot</span><span class="ruby-operator">::</span><span class="ruby-constant">Query</span><span class="ruby-operator">::</span><span class="ruby-constant">Restriction</span><span class="ruby-operator">::</span><span class="ruby-constant">EqualTo</span>, <span class="ruby-identifier">value</span>)&#x000A;              <span class="ruby-ivar">@query</span>.<span class="ruby-identifier">add_query_facet</span>(<span class="ruby-identifier">facet</span>)&#x000A;              <span class="ruby-identifier">search_facet</span>.<span class="ruby-identifier">add_row</span>(<span class="ruby-identifier">value</span>, <span class="ruby-identifier">facet</span>.<span class="ruby-identifier">to_boolean_phrase</span>)&#x000A;            <span class="ruby-keyword kw">end</span>&#x000A;          <span class="ruby-keyword kw">end</span>&#x000A;        <span class="ruby-keyword kw">else</span>&#x000A;          <span class="ruby-identifier">field_names</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">field_name</span><span class="ruby-operator">|</span>&#x000A;            <span class="ruby-identifier">search_facet</span> = <span class="ruby-keyword kw">nil</span>&#x000A;            <span class="ruby-identifier">field</span> = <span class="ruby-ivar">@setup</span>.<span class="ruby-identifier">field</span>(<span class="ruby-identifier">field_name</span>)&#x000A;            <span class="ruby-identifier">facet</span> =&#x000A;              <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:time_range</span>]&#x000A;                <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">field</span>.<span class="ruby-identifier">type</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Sunspot</span><span class="ruby-operator">::</span><span class="ruby-constant">Type</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeType</span>)&#x000A;                  <span class="ruby-identifier">raise</span>(&#x000A;                    <span class="ruby-constant">ArgumentError</span>,&#x000A;                    <span class="ruby-value str">':time_range can only be specified for Date or Time fields'</span>&#x000A;                  )&#x000A;                <span class="ruby-keyword kw">end</span>&#x000A;                <span class="ruby-identifier">search_facet</span> = <span class="ruby-ivar">@search</span>.<span class="ruby-identifier">add_date_facet</span>(<span class="ruby-identifier">field</span>, <span class="ruby-identifier">options</span>)&#x000A;                <span class="ruby-constant">Sunspot</span><span class="ruby-operator">::</span><span class="ruby-constant">Query</span><span class="ruby-operator">::</span><span class="ruby-constant">DateFieldFacet</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">field</span>, <span class="ruby-identifier">options</span>)&#x000A;              <span class="ruby-keyword kw">else</span>&#x000A;                <span class="ruby-identifier">search_facet</span> = <span class="ruby-ivar">@search</span>.<span class="ruby-identifier">add_field_facet</span>(<span class="ruby-identifier">field</span>, <span class="ruby-identifier">options</span>)&#x000A;                <span class="ruby-constant">Sunspot</span><span class="ruby-operator">::</span><span class="ruby-constant">Query</span><span class="ruby-operator">::</span><span class="ruby-constant">FieldFacet</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">field</span>, <span class="ruby-identifier">options</span>)&#x000A;              <span class="ruby-keyword kw">end</span>&#x000A;            <span class="ruby-ivar">@query</span>.<span class="ruby-identifier">add_field_facet</span>(<span class="ruby-identifier">facet</span>)&#x000A;            <span class="ruby-constant">Util</span>.<span class="ruby-constant">Array</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:extra</span>]).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">extra</span><span class="ruby-operator">|</span>&#x000A;              <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:exclude</span>)&#x000A;                <span class="ruby-identifier">raise</span>(&#x000A;                  <span class="ruby-constant">ArgumentError</span>,&#x000A;                  <span class="ruby-value str">&quot;can't use :exclude with :extra (see documentation)&quot;</span>&#x000A;                )&#x000A;              <span class="ruby-keyword kw">end</span>&#x000A;              <span class="ruby-identifier">extra_facet</span> = <span class="ruby-constant">Sunspot</span><span class="ruby-operator">::</span><span class="ruby-constant">Query</span><span class="ruby-operator">::</span><span class="ruby-constant">QueryFacet</span>.<span class="ruby-identifier">new</span>&#x000A;              <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">extra</span>&#x000A;              <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:any</span>&#x000A;                <span class="ruby-identifier">extra_facet</span>.<span class="ruby-identifier">add_negated_restriction</span>(&#x000A;                  <span class="ruby-identifier">field</span>,&#x000A;                  <span class="ruby-constant">Sunspot</span><span class="ruby-operator">::</span><span class="ruby-constant">Query</span><span class="ruby-operator">::</span><span class="ruby-constant">Restriction</span><span class="ruby-operator">::</span><span class="ruby-constant">EqualTo</span>,&#x000A;                  <span class="ruby-keyword kw">nil</span>&#x000A;                )&#x000A;              <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:none</span>&#x000A;                <span class="ruby-identifier">extra_facet</span>.<span class="ruby-identifier">add_positive_restriction</span>(&#x000A;                  <span class="ruby-identifier">field</span>,&#x000A;                  <span class="ruby-constant">Sunspot</span><span class="ruby-operator">::</span><span class="ruby-constant">Query</span><span class="ruby-operator">::</span><span class="ruby-constant">Restriction</span><span class="ruby-operator">::</span><span class="ruby-constant">EqualTo</span>,&#x000A;                  <span class="ruby-keyword kw">nil</span>&#x000A;                )&#x000A;              <span class="ruby-keyword kw">else</span>&#x000A;                <span class="ruby-identifier">raise</span>(&#x000A;                  <span class="ruby-constant">ArgumentError</span>,&#x000A;                  <span class="ruby-value str">&quot;Allowed values for :extra are :any and :none&quot;</span>&#x000A;                )&#x000A;              <span class="ruby-keyword kw">end</span>&#x000A;              <span class="ruby-identifier">search_facet</span>.<span class="ruby-identifier">add_row</span>(<span class="ruby-identifier">extra</span>, <span class="ruby-identifier">extra_facet</span>.<span class="ruby-identifier">to_boolean_phrase</span>)&#x000A;              <span class="ruby-ivar">@query</span>.<span class="ruby-identifier">add_query_facet</span>(<span class="ruby-identifier">extra_facet</span>)&#x000A;            <span class="ruby-keyword kw">end</span>&#x000A;          <span class="ruby-keyword kw">end</span>&#x000A;        <span class="ruby-keyword kw">end</span>&#x000A;      <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000104'>
                <a name='M000104'></a>
                <div class='synopsis'>
                  <span class='name'>order_by</span>
                  <span class='arguments'>(field_name, direction = nil)</span>
                </div>
                <div class='description'>
                  <p>
                  Specify the order that results should be returned in. This method can be
                  called multiple times; precedence will be in the order given.
                  </p>
                  <h4>Parameters</h4>
                  <table>
                  <tr><td valign="top">field_name<Symbol>:</td><td>the field to use for ordering
                  
                  </td></tr>
                  <tr><td valign="top">direction<Symbol>:</td><td>:asc or :desc (default :asc)
                  
                  </td></tr>
                  </table>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000104-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000104-source'><span class="ruby-comment cmt"># File lib/sunspot/dsl/field_query.rb, line 22</span>&#x000A;      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">order_by</span>(<span class="ruby-identifier">field_name</span>, <span class="ruby-identifier">direction</span> = <span class="ruby-keyword kw">nil</span>)&#x000A;        <span class="ruby-identifier">sort</span> =&#x000A;          <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">special</span> = <span class="ruby-constant">Sunspot</span><span class="ruby-operator">::</span><span class="ruby-constant">Query</span><span class="ruby-operator">::</span><span class="ruby-constant">Sort</span>.<span class="ruby-identifier">special</span>(<span class="ruby-identifier">field_name</span>)&#x000A;            <span class="ruby-identifier">special</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">direction</span>)&#x000A;          <span class="ruby-keyword kw">else</span>&#x000A;            <span class="ruby-constant">Sunspot</span><span class="ruby-operator">::</span><span class="ruby-constant">Query</span><span class="ruby-operator">::</span><span class="ruby-constant">Sort</span><span class="ruby-operator">::</span><span class="ruby-constant">FieldSort</span>.<span class="ruby-identifier">new</span>(&#x000A;              <span class="ruby-ivar">@setup</span>.<span class="ruby-identifier">field</span>(<span class="ruby-identifier">field_name</span>), <span class="ruby-identifier">direction</span>&#x000A;            )&#x000A;          <span class="ruby-keyword kw">end</span>&#x000A;        <span class="ruby-ivar">@query</span>.<span class="ruby-identifier">add_sort</span>(<span class="ruby-identifier">sort</span>)&#x000A;      <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000105'>
                <a name='M000105'></a>
                <div class='synopsis'>
                  <span class='name'>order_by_random</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  DEPRECATED Use <tt><a
                  href="FieldQuery.html#M000104">order_by</a>(:random)</tt>
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000105-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000105-source'><span class="ruby-comment cmt"># File lib/sunspot/dsl/field_query.rb, line 37</span>&#x000A;      <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">order_by_random</span>&#x000A;        <span class="ruby-identifier">order_by</span>(<span class="ruby-identifier">:random</span>)&#x000A;      <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
